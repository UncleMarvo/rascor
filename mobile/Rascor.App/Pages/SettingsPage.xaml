<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Rascor.App.Pages.SettingsPage"
             Title="Settings">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <!-- User Info Section -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="👤 User Information" FontSize="18" FontAttributes="Bold" />
                    <Label x:Name="UserIdLabel" Text="User ID: Loading..." />
                    <Label x:Name="DeviceIdLabel" Text="Device ID: Loading..." />
                    <Button Text="Copy Device ID" 
                            Clicked="OnCopyDeviceIdClicked"
                            BackgroundColor="LightBlue" />
                </VerticalStackLayout>
            </Frame>

            <!-- Geofence Status Section -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📍 Geofence Status" FontSize="18" FontAttributes="Bold" />
                    <Label x:Name="GeofenceStatusLabel" 
                           Text="Checking status..." 
                           TextColor="Gray" />
                    <Button Text="Start Monitoring" 
                            Clicked="OnStartMonitoringClicked"
                            BackgroundColor="Green"
                            TextColor="White" />
                    <Button Text="Check Current Location" 
                            Clicked="OnCheckCurrentLocationClicked"
                            BackgroundColor="Blue"
                            TextColor="White" />
                </VerticalStackLayout>
            </Frame>

            <!-- Sync Status Section -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="🔄 Sync Status" FontSize="18" FontAttributes="Bold" />
                    <Label x:Name="SyncStatusLabel" Text="Status: Checking..." />
                    <Label x:Name="PendingItemsLabel" Text="Pending items: 0" />
                    <Button Text="Sync Offline Events" 
                            Clicked="OnSyncClicked"
                            BackgroundColor="Orange"
                            TextColor="White" />
                </VerticalStackLayout>
            </Frame>

            <!-- App Preferences -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="⚙️ Preferences" FontSize="18" FontAttributes="Bold" />
                    
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Enable Notifications" VerticalOptions="Center" HorizontalOptions="StartAndExpand" />
                        <Switch x:Name="NotificationsSwitch" 
                                IsToggled="True"
                                Toggled="OnNotificationsToggled" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Sync on WiFi Only" VerticalOptions="Center" HorizontalOptions="StartAndExpand" />
                        <Switch x:Name="WiFiOnlySwitch" 
                                IsToggled="False"
                                Toggled="OnWiFiOnlyToggled" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Testing Tools Section -->
            <Frame BorderColor="Orange" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="🧪 Testing Tools" FontSize="18" FontAttributes="Bold" />
                    <Label Text="For development and debugging" FontSize="12" TextColor="Gray" />
                    
                    <Button Text="Test Notification" 
                            Clicked="OnTestNotificationClicked"
                            BackgroundColor="Purple"
                            TextColor="White" />
                    
                    <Button Text="Simulate Site Enter" 
                            Clicked="OnSimulateEnterClicked"
                            BackgroundColor="Green"
                            TextColor="White" />
                    
                    <Button Text="Simulate Site Exit" 
                            Clicked="OnSimulateExitClicked"
                            BackgroundColor="Red"
                            TextColor="White" />
                    
                    <Button Text="Reset Onboarding" 
                            Clicked="OnResetOnboardingClicked"
                            BackgroundColor="Gray"
                            TextColor="White" />
                </VerticalStackLayout>
            </Frame>

            <!-- App Info Section -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="ℹ️ App Information" FontSize="18" FontAttributes="Bold" />
                    <Label x:Name="VersionLabel" Text="Version: Loading..." />
                    <Button Text="Logout" 
                            Clicked="OnLogoutClicked"
                            BackgroundColor="DarkRed"
                            TextColor="White" />
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>